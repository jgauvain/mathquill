<!DOCTYPE html>
<html>
<head>

<title>MathQuill Toolbar Demo</title>

<!--script type="text/javascript" src="mathquill/vendor/jquery.min.js"></script>
<script type="text/javascript" src="mathquill/build/mathquill.js"></script-->
<link rel="stylesheet" href="mathquill.css">
<style type="text/css">
.eebtn {
	font-family: "Times New Roman", Times, serif;
	color: #000;
	cursor: pointer;
	padding: 0px .5em;
	height: 35px;
	border: 1px solid #000;
	text-align: center;
	background: #fff;
	vertical-align: middle;
}
.eetab { 
	cursor: pointer;
	height: 35px;
	padding: 0px 1em;
	border: 1px solid #000;
	text-align: center;
	background: #fff;
	vertical-align: middle;
	color: #000;
}
</style>

</head>
<body>

<h1>MathQuill Toolbar Demo</h1>

<p>This is a demo of a discoverable toolbar GUI for MathQuill commands and symbols.

<p>Editable Math: <span id="mqentry" class="mathquill-editable"></span>


<div id="ee" style="position: absolute; width: auto; background: #ff0;padding: 5px; ">
<div id="eeadvanced">
<table id="ee1">
<tr>
<td class="eebtn" btntext="\\frac" btntype="0"><sup>x</sup>/<sub>y</sub></td>
<td class="eebtn" btntext="^" btntype="0">x<sup>y</sup></td>
<td class="eebtn" btntext="\\sqrt" btntype="0">&radic;</td>
<td class="eebtn" btntext="\\nthroot{3}" btntype="2"><sup>3</sup>&radic;</td>
<td class="eebtn" btntext="(" btntype="0">( )</td>
<td class="eebtn" btntext="\\pi" btntype="1">&pi;</td>
<td class="eebtn" btntext="\\infty" btntype="1">&infin;</td>
<td class="eebtn" btntext="DNE" btntype="1">DNE</td>
</tr>
</table>
<table id="ee4" style="display:none;">
<tr>
<td class="eebtn" btntext="(" btntype="4">(  )</td>
<td class="eebtn" btntext="\\intervalopenleft" btntype="4">(  ]</td>
<td class="eebtn" btntext="\\intervalopenright" btntype="4">[ )</td> 
<td class="eebtn" btntext="[" btntype="4">[   ]</td>
<td class="eebtn" btntext="-\\infty" btntype="1">-&infin;</td>
<td class="eebtn" btntext="\\infty" btntype="1">&infin;</td>
<td class="eebtn" btntext="DNE" btntype="1">DNE</td>
</tr>
</table>
<table id="ee5" style="display:none;">
<tr>
<td class="eebtn" btntext="<" btntype="1">&lt;</td>
<td class="eebtn" btntext=">" btntype="1">&gt;</td>
<td class="eebtn" btntext="\\le" btntype="1">&le;</td>
<td class="eebtn" btntext="\\ge" btntype="1">&ge;</td>
<td class="eebtn" btntext="\\text{ or }" btntype="1">or</td>
<td class="eebtn" btntext="\\text{all real numbers}" btntype="1">All Real Numbers</td>
<td class="eebtn" btntext="DNE" btntype="1">DNE</td>
</tr>
</table>
<table id="ee2" style="display:none;">
<tr>
<td class="eebtn" btntext="\\log" btntype="3">log</td>
<td class="eebtn" btntext="\\log_2" btntype="3">log<sub><sub>2</sub></sub></td>
<td class="eebtn" btntext="\\ln" btntype="3">ln</td>
<td class="eebtn" btntext="|" btntype="0">| x |</td>
<td class="eebtn" btntext="e^" btntype="2">e<sup>x</sup></td>
</tr>
</table>
<table id="ee3" style="display:none;">
<tr>
<td class="eebtn" btntext="\\sin" btntype="3">sin</td>
<td class="eebtn" btntext="\\cos" btntype="3">cos</td>
<td class="eebtn" btntext="\\tan" btntype="3">tan</td>
<td class="eebtn" btntext="\\sin^2" btntype="3">sin<sup>2</sup></td>
<td class="eebtn" btntext="\\arcsin" btntype="3">sin<sup>-1</sup></td>
<td class="eebtn" btntext="\\arccos" btntype="3">cos<sup>-1</sup></td>
<td class="eebtn" btntext="\\arctan" btntype="3">tan<sup>-1</sup></td>
<td class="eebtn" btntext="\\langle" btntype="0">&lt;  &gt;</td>
</tr>
</table>
<table>
<tr>
<td class="eetab" id="eetab1" style="background: #cfc" onclick="eetoggleactive('1')">General</td>
<td class="eetab" id="eetab4" onclick="eetoggleactive('4')">Intervals</td>
<td class="eetab" id="eetab5" onclick="eetoggleactive('5')">Inequalities</td>
<td class="eetab" id="eetab2" onclick="eetoggleactive('2')">Functions</td>
<td class="eetab" id="eetab3" onclick="eetoggleactive('3')">Trig</td>
</tr>
</table>
</div>
</div>

<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="mathquill.php"></script>
<script type="text/javascript">
var ed;
$(function() {
  //ed = $('.mathquill-editable').focus();
  ed = $('#mqentry').focus();
  $(window).load(function() {
    $('.mathquill-rendered-math').mathquill('redraw').focus();
  });
  
  $(document).ready(function() { 
  	$('.eebtn').mousedown(function(e) {e.stopPropogation();}).click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        var t = $(this).attr("btntext");
        var type = $(this).attr("btntype");
        t = t.replace('\\\\','\\');
        if (type==0) {
		setTimeout(function() {ed.mathquill('cmd', t).focus();});
	} else if (type==1) {
		setTimeout(function() {ed.mathquill('write', t).focus();});
	} else if (type==2) {
		setTimeout(function() {ed.mathquill('writesimpfunc', t).focus();});
	} else if (type==3) {
		setTimeout(function() {ed.mathquill('writefunc', t).focus();});
	} else if (type=4) {
		setTimeout(function() {ed.mathquill('writeint', t).focus();});
	}
    }); 
}); 
});
/*$('.eebtn').click(function(e) {
  var latex = $(e.target).closest('p').children('code').text();
  if(latex)
    ed.mathquill('write', latex).focus();
});*/
/*
function eeinsert(t,type) {
	if (type==0) {
		ed.mathquill('cmd', t).focus();
	} else if (type==1) {
		ed.mathquill('write', t).focus();
	} else if (type==2) {
		ed.mathquill('writesimpfunc', t).focus();
	} else if (type==3) {
		ed.mathquill('writefunc', t).focus();
	} else if (type=4) {
		ed.mathquill('writeint', t).focus();
	}
	setTimeout(function() {ed.focus();},50);
}
*/


function eetoggleactive(n) {
	for (var i=1; i<=5; i++) {
		if (n==i) {
			document.getElementById("ee"+i).style.display = "";
			document.getElementById("eetab"+i).style.backgroundColor = "#cfc";
		} else {
			document.getElementById("ee"+i).style.display = "none";
			document.getElementById("eetab"+i).style.backgroundColor = "#fff";
		}
	}
	eeactivetab = n;
	setTimeout(function() {ed.focus();});
	/*el = document.getElementById(eecurel);
	if (el.setSelectionRange){
		el.focus();
	    }
	    else if (document.selection && document.selection.createRange) {
		eeselstore.select();
	    }
	unhideee(0);*/
}

function showee(eln) {
	el = document.getElementById(eln);
	var ee = document.getElementById('ee');
	eecurel = eln;
	p = el.position()
	ee.style.left = p.left + "px";
	ee.style.top = (p.top + el.offsetHeight) + "px";
	ee.style.display = "block";
	el.focus();
}
</script>

</body>
</html>
